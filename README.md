[TOC]

# 飞行检查模拟系统

## 简介

飞行检查模拟系统在允许用户导入飞行模拟数据，及针对飞机的各个航空器及零部件设定对应的检查方程式，并提供了将模拟数据引入到方程式的计算环境中，计算出在模拟数据下飞机各个阶段的执行状况。

## 术语及技术关联

### FAAS（飞行显示警告系统）

管理所有的告警逻辑，告警逻辑也就是程序中所说的方程式，具体支持的方程式格式下文具体介绍。

### CAS（发动机指示和机组警告系统）

配置各种警告信息，可用来指示飞机各系统的工作状态，需要提供文字、图形、音频三种类型的警告信息。

### 抑制阶段

是 CAS 的一个属性，这些属性可以指定在某些特定的飞行阶段中，对该条告警提示进行抑制（不显示），避免分散飞行员的注意力。

### ICD（接口控制文件）

用来定义各个子系统之间交互信息的定义，包括信息的意义、组成及格式等，其中还会包含信号的类型、信号值、信号偏移量、传输频率、传输路径等信息。

### ECL（电子检查单）

检查单分为正常检查单和非正常检查单，内容主要为飞行员在飞行的每个关键步骤必须执行的检查项目。

### ATA

是一套对航空器和零部件进行分类编码的规范，前面的各种信息，都将依照该规范进行分类存储及管理。

### Other

- A664（数据总线协议 Arinc664）

  飞机各子系统间进行数据交互的网络。

- 5ID

  是一种信号定义方式，用于通过名称辨识信号的详细信息，如来源。

- LAMP（指示灯）

- AURAL（音响）

- WARNING（告警）

- CAUTION（告警/注意）

## 系统概览

### 数据源

数据源是从外部文件(XML 或 JSON 格式)导入的飞机真实数据，该真实数据只有管理员可以进行更改，普通用户只能对其做临时变更，无法变更源数据。

数据源中的每条数据称之为一行，每行数据可能是***离散量***也可能是***数字量***，界面应针对不同类型提供不同的便捷编辑操作。

临时变更的数据行，需以醒目的方式展示，有助于使用人员区分数据的原始性。

临时变更的数据行需要保存变更历史*（所有变更还是最新 N 条变更？）*，并随时能重置为原始数据。

#### 

### ATA 目录管理

使用 `ATA` 规范建立整个标准的目录结构，也就是系统要提供不限层级的目录配置能力。该目录主要维护章节号、设备、信号等信息。

### 目录的逻辑数据

每个目录节点会包含多个数据节点（叶子节点），这些节点称为逻辑数据，逻辑数据分为 CAS 信息和简图页两种展示方式。

#### CAS 信息

CAS 信息是一种警告信息，可以为其配置警告发生时的文字、颜色、图形、音频三种形式的告警方式。CAS 信息同时可绑定公式，当绑定的公式的结果满足*(或不满足?)*指定的条件时，触发告警信息。

> 每个 CAS信息 下至多有 15 条方程式。

CAS 信息需要提供两种展示方式，一种是输入方程式的文本界面，另一种是将方程式解析为对应的执行流程界面。

##### 方程式

方程式是一系列逻辑及数学定义，定义完善的方程式代表一个执行流程，该执行流程支持以下计算：

- 数学计算
  - `+、-、*、/`
- 逻辑计算
  - `>、>=、<、<=、!=、=`
- 优先级计算
  - 可通过括号提高计算的优先级
- 可定义变量
- 可定义函数

###### 疑问

- 什么是根故障？

- 什么是回溯父级故障？

- CAS 的告警信息是否需要针对各个不同的方程式做定义

- 抑制阶段、根故障等属性是应用在 CAS 上还是方程式上

- 方程式的简图形式是否类似流程图

  而不是像示例图中的数字电路图

##### CAS 的 ECL 信息

需要明确标识来表示一个 CAS 信息是否有 ECL（电子检查单），如果有，则点击 ECL 标识后列出该 CAS 的 ECL 检查单，根据当前 CAS 的方程式及相关参数展示每条检查项目的状态结果。

##### ECL 的计算方式

ECL 可以关联 1 到 10 个方程式，并设定方程式之间的逻辑关系（与、或、非）。

#### 简图页信息

简图页以简图的方式展示。一个简图页可对应 15 个简图。

简图页由简图元素按照一定的逻辑组成，相关的元素有：

- 流线
- 设备框
- 数字读数
- 字符状态

这些元素允许使用圆形、矩形、不规则图形进行表示，**这些简图元素称之为配置项**。

##### 配置项

每个配置项可以关联 1 到 10 个 **逻辑**，每个 **逻辑** 只能有唯一的结果，如颜色、阀门开关状态。

每个配置项需要能够按照 **逻辑** 进行属性变更，如流线颜色、阀门开关状态。

逻辑的类型可能是 CAS 信息或者简图页的显示符号==（显示符号是指什么？)==。如果逻辑是 CAS，则它应当能够自定义配置其方程式及 ECL。

##### 简图配置

简图由用户根据业务逻辑来进行手工配置，需要提供可拖拽的操作方式。